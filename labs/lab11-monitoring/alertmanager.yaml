# this file gets base-64 encoded into flaky-app-alertmanager-secret.yaml
#
#   echo "# generated -- do not edit this file" > manifests/flaky-app-alertmanager-secret.yaml && \
#   kubectl -n monitoring create secret generic alertmanager-main --from-file=alertmanager.yaml \
#     --dry-run=client -o yaml >>manifests/flaky-app-alertmanager-secret.yaml
#
global:
  resolve_timeout: 5m
receivers:
  - name: "null"
  - name: webhook
    webhook_configs:
      - url: http://requestbin.default:8000/alerts
        send_resolved: true
  - name: smtp
    email_configs:
      - from: alerts@kots.io
        send_resolved: true
        to: admin@somebigbank.com
        smarthost:
route:
  group_by: ["job"]
  group_interval: 10s
  group_wait: 30s
  receiver: "null"
  repeat_interval: 5m
  routes:
    - match:
        service: flaky-app
      receiver: webhook
